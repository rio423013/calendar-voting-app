<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- â† ã“ã“ã«è¿½åŠ ï¼ -->
  <title>äºˆå®šé¸æŠã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    h2 { margin-bottom: 5px; }
    h3 { margin-top: 0; }
    table { margin: 0 auto; border-collapse: collapse; width: 80%; max-width: 600px; }
    th, td { padding: 10px; border: 1px solid #ccc; cursor: pointer; }
    th.sunday, td.sunday { color: red; }
    th.saturday, td.saturday { color: blue; }
    .rank1 { background-color: #28a745; color: white; }
    .rank2 { background-color: #ffc107; }
    .rank3 { background-color: #dc3545; color: white; }
  </style>
</head>
<body>
  <h2>å¸Œæœ›æ—¥ã‚’é¸ã‚“ã§ãã ã•ã„ï¼ˆæœ€å¤§3æ—¥ï¼‰</h2>
  <h3 id="month-label"></h3>
  <table id="calendar"></table>

  <div style="margin-top:20px;">
    <p>ç¬¬ï¼‘å¸Œæœ›æ—¥ï¼š<span id="choice1">-</span></p>
    <p>ç¬¬ï¼’å¸Œæœ›æ—¥ï¼š<span id="choice2">-</span></p>
    <p>ç¬¬ï¼“å¸Œæœ›æ—¥ï¼š<span id="choice3">-</span></p>
    <button onclick="saveChoices()">ä¿å­˜ã™ã‚‹</button>
  </div>

  <script>
    const selectedDates = [];
    let saved = false;

    const currentYear = 2025;
    const currentMonth = 7; // æœˆã¯0å§‹ã¾ã‚Š â†’ 7 = 8æœˆ

    function updateDisplay() {
      document.getElementById("choice1").textContent = selectedDates[0] ?? "-";
      document.getElementById("choice2").textContent = selectedDates[1] ?? "-";
      document.getElementById("choice3").textContent = selectedDates[2] ?? "-";
    }

    function createCalendar(year, month) {
      const calendar = document.getElementById("calendar");
      calendar.innerHTML = ""; // â† ä¿®æ­£æ¸ˆã¿ï¼ˆã‚¹ãƒšãƒ«ã‚‚OKï¼ï¼‰
      const monthLabel = document.getElementById("month-label");
      const monthNames = ["1æœˆ","2æœˆ","3æœˆ","4æœˆ","5æœˆ","6æœˆ","7æœˆ","8æœˆ","9æœˆ","10æœˆ","11æœˆ","12æœˆ"];
      monthLabel.textContent = `${year}å¹´ ${monthNames[month]}`;

      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      const dayNames = ["æ—¥", "æœˆ", "ç«", "æ°´", "æœ¨", "é‡‘", "åœŸ"];
      const headerRow = document.createElement("tr");
      dayNames.forEach((day, i) => {
        const th = document.createElement("th");
        th.textContent = day;
        if (i === 0) th.className = "sunday";
        if (i === 6) th.className = "saturday";
        headerRow.appendChild(th);
      });
      calendar.appendChild(headerRow);

      let date = 1;
      for (let row = 0; row < 6 && date <= daysInMonth; row++) {
        const tr = document.createElement("tr");
        for (let col = 0; col < 7; col++) {
          const td = document.createElement("td");
          if (row === 0 && col < firstDay) {
            td.textContent = "";
          } else if (date <= daysInMonth) {
            td.textContent = date;
            td.id = `day-${date}`;
            td.onclick = ((d) => () => handleDateClick(d))(date);
            if (col === 0) td.classList.add("sunday");
            if (col === 6) td.classList.add("saturday");
            date++;
          }
          tr.appendChild(td);
        }
        calendar.appendChild(tr);
      }
    }

    function handleDateClick(day) {
      if (saved) return;
      const index = selectedDates.indexOf(day);
      if (index !== -1) {
        selectedDates.splice(index, 1);
      } else if (selectedDates.length < 3) {
        selectedDates.push(day);
      }

      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
      for (let i = 1; i <= daysInMonth; i++) {
        const td = document.getElementById(`day-${i}`);
        if (td) td.classList.remove("rank1", "rank2", "rank3");
      }

      selectedDates.forEach((d, i) => {
        const td = document.getElementById(`day-${d}`);
        if (td) td.classList.add(`rank${i + 1}`);
      });

      updateDisplay();
    }

    function saveChoices() {
      if (selectedDates.length === 0) {
        alert("æœ€ä½1ã¤ã¯å¸Œæœ›æ—¥ã‚’é¸ã‚“ã§ãã ã•ã„ï¼");
        return;
      }
      saved = true;
      alert("å¸Œæœ›æ—¥ã‚’ä¿å­˜ã—ã¾ã—ãŸ ğŸ‰");
      console.log("ä¿å­˜ã•ã‚ŒãŸå¸Œæœ›æ—¥:", selectedDates);
    }

    createCalendar(currentYear, currentMonth);
    updateDisplay();
  </script>
</body>
</html>